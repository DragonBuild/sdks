--- !tapi-tbd-v3
archs:                 [ armv7, armv7s, arm64, arm64e, i386, x86_64 ]
platform:              ios
flags:                 [ flat_namespace ]
install-name:          /System/Library/Frameworks/MetalPerformanceShaders.framework/Frameworks/MPSNeuralNetwork.framework/MPSNeuralNetwork
current-version:       124.0.17
compatibility-version: 1
objc-constraint:       retain_release
exports:
  - archs:                [ armv7, armv7s, arm64, arm64e, i386, x86_64 ]
    allowable-clients:    [ MetalPerformanceShaders ]
    symbols:              [ _DeadlockedBecauseTheCPUBasedWeightUpdateForThePreviousBatchOccursAtCompletionOfThisCmdBuf_TryGPUUpdateOrNewCmdBufInstead ]
    objc-classes:         [ MPSCNNAdd, MPSCNNAddGradient, MPSCNNArithmetic,
                            MPSCNNArithmeticGradient,
                            MPSCNNArithmeticGradientState,
                            MPSCNNBatchNormalization,
                            MPSCNNBatchNormalizationGradient,
                            MPSCNNBatchNormalizationGradientNode,
                            MPSCNNBatchNormalizationNode,
                            MPSCNNBatchNormalizationState,
                            MPSCNNBatchNormalizationStatistics,
                            MPSCNNBatchNormalizationStatisticsGradient,
                            MPSCNNBinaryConvolution, MPSCNNBinaryConvolutionNode,
                            MPSCNNBinaryFullyConnected,
                            MPSCNNBinaryFullyConnectedNode, MPSCNNBinaryKernel,
                            MPSCNNConvolution, MPSCNNConvolutionDescriptor,
                            MPSCNNConvolutionGradient,
                            MPSCNNConvolutionGradientNode,
                            MPSCNNConvolutionGradientState,
                            MPSCNNConvolutionGradientStateNode,
                            MPSCNNConvolutionNode, MPSCNNConvolutionState,
                            MPSCNNConvolutionStateNode,
                            MPSCNNConvolutionTranspose,
                            MPSCNNConvolutionTransposeGradient,
                            MPSCNNConvolutionTransposeGradientNode,
                            MPSCNNConvolutionTransposeGradientState,
                            MPSCNNConvolutionTransposeGradientStateNode,
                            MPSCNNConvolutionTransposeNode,
                            MPSCNNConvolutionWeightsAndBiasesState,
                            MPSCNNCrossChannelNormalization,
                            MPSCNNCrossChannelNormalizationGradient,
                            MPSCNNCrossChannelNormalizationGradientNode,
                            MPSCNNCrossChannelNormalizationNode,
                            MPSCNNDepthWiseConvolutionDescriptor,
                            MPSCNNDilatedPoolingMax,
                            MPSCNNDilatedPoolingMaxGradient,
                            MPSCNNDilatedPoolingMaxGradientNode,
                            MPSCNNDilatedPoolingMaxNode, MPSCNNDivide,
                            MPSCNNDropout, MPSCNNDropoutGradient,
                            MPSCNNDropoutGradientNode,
                            MPSCNNDropoutGradientState, MPSCNNDropoutNode,
                            MPSCNNDropoutRandomState, MPSCNNFullyConnected,
                            MPSCNNFullyConnectedGradient,
                            MPSCNNFullyConnectedGradientNode,
                            MPSCNNFullyConnectedNode, MPSCNNGradientKernel,
                            MPSCNNGroupNormalization,
                            MPSCNNGroupNormalizationGradient,
                            MPSCNNGroupNormalizationGradientNode,
                            MPSCNNGroupNormalizationNode,
                            MPSCNNInstanceNormalization,
                            MPSCNNInstanceNormalizationGradient,
                            MPSCNNInstanceNormalizationGradientNode,
                            MPSCNNInstanceNormalizationGradientState,
                            MPSCNNInstanceNormalizationNode, MPSCNNKernel,
                            MPSCNNLocalContrastNormalization,
                            MPSCNNLocalContrastNormalizationGradient,
                            MPSCNNLocalContrastNormalizationGradientNode,
                            MPSCNNLocalContrastNormalizationNode,
                            MPSCNNLogSoftMax, MPSCNNLogSoftMaxGradient,
                            MPSCNNLogSoftMaxGradientNode, MPSCNNLogSoftMaxNode,
                            MPSCNNLoss, MPSCNNLossDataDescriptor,
                            MPSCNNLossDescriptor, MPSCNNLossLabels, MPSCNNLossNode,
                            MPSCNNMultiaryKernel, MPSCNNMultiply,
                            MPSCNNMultiplyGradient, MPSCNNNeuron,
                            MPSCNNNeuronAbsolute, MPSCNNNeuronAbsoluteNode,
                            MPSCNNNeuronELU, MPSCNNNeuronELUNode,
                            MPSCNNNeuronExponential, MPSCNNNeuronExponentialNode,
                            MPSCNNNeuronGeLUNode, MPSCNNNeuronGradient,
                            MPSCNNNeuronGradientNode, MPSCNNNeuronHardSigmoid,
                            MPSCNNNeuronHardSigmoidNode, MPSCNNNeuronLinear,
                            MPSCNNNeuronLinearNode, MPSCNNNeuronLogarithm,
                            MPSCNNNeuronLogarithmNode, MPSCNNNeuronNode,
                            MPSCNNNeuronPReLU, MPSCNNNeuronPReLUNode,
                            MPSCNNNeuronPower, MPSCNNNeuronPowerNode,
                            MPSCNNNeuronReLU, MPSCNNNeuronReLUN,
                            MPSCNNNeuronReLUNNode, MPSCNNNeuronReLUNode,
                            MPSCNNNeuronSigmoid, MPSCNNNeuronSigmoidNode,
                            MPSCNNNeuronSoftPlus, MPSCNNNeuronSoftPlusNode,
                            MPSCNNNeuronSoftSign, MPSCNNNeuronSoftSignNode,
                            MPSCNNNeuronTanH, MPSCNNNeuronTanHNode,
                            MPSCNNNormalizationGammaAndBetaState,
                            MPSCNNNormalizationMeanAndVarianceState,
                            MPSCNNPooling, MPSCNNPoolingAverage,
                            MPSCNNPoolingAverageGradient,
                            MPSCNNPoolingAverageGradientNode,
                            MPSCNNPoolingAverageNode, MPSCNNPoolingGradientNode,
                            MPSCNNPoolingL2Norm, MPSCNNPoolingL2NormGradient,
                            MPSCNNPoolingL2NormGradientNode,
                            MPSCNNPoolingL2NormNode, MPSCNNPoolingMax,
                            MPSCNNPoolingMaxGradient,
                            MPSCNNPoolingMaxGradientNode, MPSCNNPoolingMaxNode,
                            MPSCNNSoftMax, MPSCNNSoftMaxGradient,
                            MPSCNNSoftMaxGradientNode, MPSCNNSoftMaxNode,
                            MPSCNNSpatialNormalization,
                            MPSCNNSpatialNormalizationGradient,
                            MPSCNNSpatialNormalizationGradientNode,
                            MPSCNNSpatialNormalizationNode,
                            MPSCNNSubPixelConvolutionDescriptor, MPSCNNSubtract,
                            MPSCNNSubtractGradient, MPSCNNUpsampling,
                            MPSCNNUpsamplingBilinear,
                            MPSCNNUpsamplingBilinearGradient,
                            MPSCNNUpsamplingBilinearGradientNode,
                            MPSCNNUpsamplingBilinearNode,
                            MPSCNNUpsamplingGradient, MPSCNNUpsamplingNearest,
                            MPSCNNUpsamplingNearestGradient,
                            MPSCNNUpsamplingNearestGradientNode,
                            MPSCNNUpsamplingNearestNode, MPSCNNYOLOLoss,
                            MPSCNNYOLOLossDescriptor, MPSCNNYOLOLossNode,
                            MPSExternalCNNBinary, MPSExternalCNNPoolingAverage,
                            MPSExternalCNNUnary, MPSGRUDescriptor,
                            MPSLSTMDescriptor, MPSMatrixBatchNormalization,
                            MPSMatrixBatchNormalizationGradient,
                            MPSMatrixFullyConnected,
                            MPSMatrixFullyConnectedGradient, MPSMatrixNeuron,
                            MPSMatrixNeuronGradient, MPSMatrixSum,
                            MPSNNAdditionGradientNode, MPSNNAdditionNode,
                            MPSNNBilinearScaleNode, MPSNNBinaryGradientStateNode,
                            MPSNNCompare, MPSNNComparisonNode, MPSNNConcatenation,
                            MPSNNConcatenationNode, MPSNNCropAndResizeBilinear,
                            MPSNNDefaultPadding, MPSNNDivisionNode,
                            MPSNNFilterNode, MPSNNForwardLoss,
                            MPSNNForwardLossNode, MPSNNGradientFilterNode,
                            MPSNNGradientStateNode, MPSNNGramMatrixCalculation,
                            MPSNNGramMatrixCalculationGradient,
                            MPSNNGramMatrixCalculationGradientNode,
                            MPSNNGramMatrixCalculationNode, MPSNNGraph,
                            MPSNNGridSample, MPSNNImageNode, MPSNNInitialGradient,
                            MPSNNInitialGradientNode, MPSNNLanczosScaleNode,
                            MPSNNLocalCorrelation, MPSNNLossGradient,
                            MPSNNLossGradientNode, MPSNNMultiaryGradientState,
                            MPSNNMultiplicationGradientNode,
                            MPSNNMultiplicationNode, MPSNNNeuronDescriptor,
                            MPSNNOptimizer, MPSNNOptimizerAdam,
                            MPSNNOptimizerDescriptor, MPSNNOptimizerRMSProp,
                            MPSNNOptimizerStochasticGradientDescent, MPSNNPad,
                            MPSNNPadGradient, MPSNNPadGradientNode, MPSNNPadNode,
                            MPSNNPermute, MPSNNPermuteGradient,
                            MPSNNPermuteGradientNode, MPSNNPermuteNode,
                            MPSNNReduceColumnMax, MPSNNReduceColumnMean,
                            MPSNNReduceColumnMin, MPSNNReduceColumnSum,
                            MPSNNReduceFeatureChannelsAndWeightsMean,
                            MPSNNReduceFeatureChannelsAndWeightsSum,
                            MPSNNReduceFeatureChannelsArgumentMax,
                            MPSNNReduceFeatureChannelsArgumentMin,
                            MPSNNReduceFeatureChannelsMax,
                            MPSNNReduceFeatureChannelsMean,
                            MPSNNReduceFeatureChannelsMin,
                            MPSNNReduceFeatureChannelsSum, MPSNNReduceRowMax,
                            MPSNNReduceRowMean, MPSNNReduceRowMin,
                            MPSNNReduceRowSum, MPSNNReductionColumnMaxNode,
                            MPSNNReductionColumnMeanNode,
                            MPSNNReductionColumnMinNode,
                            MPSNNReductionColumnSumNode,
                            MPSNNReductionFeatureChannelsArgumentMaxNode,
                            MPSNNReductionFeatureChannelsArgumentMinNode,
                            MPSNNReductionFeatureChannelsMaxNode,
                            MPSNNReductionFeatureChannelsMeanNode,
                            MPSNNReductionFeatureChannelsMinNode,
                            MPSNNReductionFeatureChannelsSumNode,
                            MPSNNReductionRowMaxNode, MPSNNReductionRowMeanNode,
                            MPSNNReductionRowMinNode, MPSNNReductionRowSumNode,
                            MPSNNReductionSpatialMeanGradientNode,
                            MPSNNReductionSpatialMeanNode, MPSNNReshape,
                            MPSNNReshapeGradient, MPSNNReshapeGradientNode,
                            MPSNNReshapeNode, MPSNNResizeBilinear, MPSNNScaleNode,
                            MPSNNSlice, MPSNNSubtractionGradientNode,
                            MPSNNSubtractionNode, MPSNNUnaryReductionNode,
                            MPSPluginCNNConvolutionDescriptor, MPSRNNDescriptor,
                            MPSRNNImageInferenceLayer,
                            MPSRNNMatrixInferenceLayer,
                            MPSRNNMatrixTrainingLayer, MPSRNNMatrixTrainingState,
                            MPSRNNRecurrentImageState,
                            MPSRNNRecurrentMatrixState,
                            MPSRNNSingleGateDescriptor ]
undefineds:
  - archs:                [ armv7, armv7s, arm64, arm64e, i386, x86_64 ]
    symbols:              [ _MPSConvertFloatToHalf, _MPSConvertHalfToFloat,
                            _MPSCopyToFromNetworkByteOrder16,
                            _MPSCopyToFromNetworkByteOrder32,
                            _MPSCreateFunctionConstantValues,
                            _MPSEncodeCopyTexture, _MPSGetImageType,
                            _MPSGetTemporaryBufferFromCommandBufferCache,
                            _MPSGetUIntDivisorMagicNumber,
                            _MPSGetUShortDivisorMagicNumber,
                            _MPSGetvecLibFunction,
                            _MPSImageBatchIncrementReadCount,
                            _MPSImageBatchResourceSize,
                            _MPSImageFeatureChannelFormatGetName,
                            _MPSIsTextureTwiddled, _MPSRectNoClip,
                            _MPSReturnGetName,
                            _MPSReturnTemporaryBufferToCommandBufferCache,
                            _MPSSeparatePassDimensions,
                            _MPSStateBatchIncrementReadCount,
                            _MPSStateBatchResourceSize,
                            _MPSStateBatchSynchronize, _MPSSubTileEncode,
                            _MTLCreateSystemDefaultDevice,
                            _MTLPixelFormatGetInfoForDevice, _MTLReportFailure,
                            _MTLReportFailureTypeEnabled, _NSClassFromString,
                            _NSLocalizedDescriptionKey, _NSLog,
                            _NSSelectorFromString, _NSStringFromClass,
                            _NSStringFromSelector, __Block_object_assign,
                            __Block_object_dispose, __NSConcreteGlobalBlock,
                            __NSConcreteStackBlock, __Unwind_Resume,
                            __Z21MPSDecrementReadCountP17MPSTemporaryImage,
                            __Z21MPSDecrementReadCountP18MPSTemporaryMatrix,
                            __Z21MPSDecrementReadCountP18MPSTemporaryVector,
                            __Z21MPSDecrementReadCountP7NSArrayIP8MPSImageE,
                            __Z21MPSDecrementReadCountP7NSArrayIP8MPSStateE,
                            __Z21MPSDecrementReadCountP8MPSImage,
                            __Z21MPSDecrementReadCountP8MPSState,
                            __Z25MPSGetEffectiveClipRegion7MTLSize9MTLRegion,
                            __ZN10MPSLibrary13ReleaseMPSKeyEP11MPSKey_data,
                            __ZN10MPSLibrary15GetComputeStateEjRK23MPSFunctionConstantList30MPSThreadGroupSizeMultipleType24MPSDriverCompilerOptions,
                            __ZN10MPSLibrary19CreateUberShaderKeyEP8NSStringRK23MPSFunctionConstantListyPFvPU21objcproto10MTLLibrary11objc_objectPK13MPSKernelInfoS4_U13block_pointerFvPU22objcproto11MTLFunction11objc_objectP7NSErrorEEy30MPSThreadGroupSizeMultipleType24MPSDriverCompilerOptionsP18MPSKernelDAGObject,
                            __ZN10MPSLibrary19ReleaseComputeStateEPU34objcproto23MTLComputePipelineState11objc_object,
                            __ZN10MPSLibrary25GetPipelineStateForMPSKeyEP11MPSKey_dataPU27objcproto16MTLCommandBuffer11objc_object,
                            __ZN12MPSAutoCache13GetTempBufferEmP15MTLSizeAndAlign,
                            __ZN12MPSAutoCache14GetTempTextureEPK12MPSPixelInfoPK7MTLSizeP20MTLTextureDescriptorbP19TextureSizeAndAlign,
                            __ZN12MPSAutoCache16PrefetchHeapSizeEPU27objcproto16MTLCommandBuffer11objc_objectm,
                            __ZN12MPSAutoCacheC1EPU27objcproto16MTLCommandBuffer11objc_objectPU21objcproto10MTLTexture11objc_object,
                            __ZN12MPSAutoCacheD1Ev,
                            __ZN13MPSAutoBuffer14AllocateBufferEP8NSString,
                            __ZN13MPSAutoBuffer14InitWithBufferEPU19objcproto9MTLBuffer11objc_object,
                            __ZN13MPSAutoBuffer23InitDeferredUsingDeviceEmPU19objcproto9MTLDevice11objc_object,
                            __ZN13MPSAutoBufferD1Ev,
                            __ZN14MPSAutoTexture15AllocateTextureEP8NSString,
                            __ZN9MPSDevice10GetSamplerE16MPSImageEdgeMode21MPSFilterSamplingMode23MPSFilterCoordinateMode,
                            __ZN9MPSDevice11DeleteQueueEPU26objcproto15MTLCommandQueue11objc_object,
                            __ZN9MPSDevice12GetMPSDeviceEPU19objcproto9MTLDevice11objc_object,
                            __ZN9MPSDevice12GetPixelInfoE14MTLPixelFormat28MPSImageFeatureChannelFormat,
                            __ZN9MPSDevice8GetQueueEv,
                            __ZNK13MPSAutoBuffer5PrintEv, __ZSt9terminatev, __ZTIi,
                            __ZTVN10__cxxabiv116__enum_type_infoE,
                            ___CFConstantStringClassReference, ___assert_rtn,
                            ___chkstk_darwin, ___cxa_allocate_exception,
                            ___cxa_begin_catch, ___cxa_call_unexpected,
                            ___cxa_end_catch, ___cxa_pure_virtual, ___cxa_throw,
                            ___gxx_personality_v0, ___stack_chk_fail,
                            ___stack_chk_guard, ___stderrp, __objc_empty_cache,
                            _arc4random, _bzero, _calloc, _dispatch_once,
                            _dispatch_release, _dispatch_semaphore_create,
                            _dispatch_semaphore_signal, _dispatch_semaphore_wait,
                            _dladdr, _fprintf, _fputc, _free, _fwrite,
                            _kMPSEmptyLibraryInfo, _mach_task_self_,
                            _mach_vm_allocate, _mach_vm_deallocate, _malloc, _memcpy,
                            _memset, _memset_pattern4, _objc_alloc, _objc_alloc_init,
                            _objc_autorelease, _objc_autoreleasePoolPop,
                            _objc_autoreleasePoolPush, _objc_enumerationMutation,
                            _objc_getProperty, _objc_msgSend, _objc_msgSendSuper2,
                            _objc_opt_class, _objc_opt_isKindOfClass,
                            _objc_opt_new, _objc_opt_respondsToSelector,
                            _objc_release, _objc_retain,
                            _objc_setProperty_atomic_copy,
                            _objc_setProperty_nonatomic, _pow,
                            _pthread_mutex_destroy, _pthread_mutex_init,
                            _pthread_mutex_lock, _pthread_mutex_unlock, _realloc,
                            _reallocf, _snprintf, _strlen, _vfprintf, _vm_page_mask,
                            _vm_page_size, _vm_region_64, dyld_stub_binder ]
    objc-classes:         [ MPSCommandBuffer, MPSComputeEncoder,
                            MPSExternalPluginBase, MPSImage, MPSImageAdd,
                            MPSImageArithmetic, MPSImageBilinearScale,
                            MPSImageCopyToMatrix, MPSImageDescriptor,
                            MPSImageDivide, MPSImageLanczosScale, MPSImageMultiply,
                            MPSImageSubtract, MPSKernel, MPSKeyedUnarchiver,
                            MPSMatrix, MPSMatrixBinaryKernel, MPSMatrixCopy,
                            MPSMatrixCopyDescriptor, MPSMatrixCopyToImage,
                            MPSMatrixDescriptor, MPSMatrixMultiplication,
                            MPSMatrixUnaryKernel,
                            MPSParallelRandomDistributionDescriptor,
                            MPSParallelRandomMTGP32,
                            MPSParallelRandomMTGP32State, MPSState,
                            MPSStateResourceList, MPSTemporaryImage,
                            MPSTemporaryMatrix, MPSVector, MPSVectorDescriptor,
                            MTLTextureDescriptor, NSArray, NSAutoreleasePool, NSData,
                            NSDictionary, NSError, NSKeyedArchiver, NSMutableArray,
                            NSMutableDictionary, NSNull, NSNumber, NSObject, NSSet,
                            NSString ]
    objc-ivars:           [ MPSExternalPluginBase._self, MPSImage._device,
                            MPSImage._featureChannelFormat,
                            MPSImage._featureChannels,
                            MPSImage._featureChannelsLayout, MPSImage._height,
                            MPSImage._numberOfImages, MPSImage._pixelInfo,
                            MPSImage._texture, MPSImage._textureType,
                            MPSImage._width, MPSImageDescriptor._height,
                            MPSImageDescriptor._width, MPSKernel._allowedOptions,
                            MPSKernel._device, MPSKernel._fileVersion,
                            MPSKernel._label, MPSKernel._library,
                            MPSKernel._options, MPSMatrix._buffer,
                            MPSMatrix._offset, MPSMatrix._rows,
                            MPSParallelRandomMTGP32._bernoulliParameter,
                            MPSState._flags, MPSState._readCount,
                            MPSState._resourceCount, MPSState._resources,
                            MPSTemporaryImage._readCount,
                            MPSUnaryImageKernel._encode,
                            MPSUnaryImageKernel._encodeData,
                            MPSUnaryImageKernel._getPreferredTileSize,
                            MPSVector._buffer, MPSVector._offset ]
...
